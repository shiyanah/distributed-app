<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Distributed Inventory Tracker</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background-color: #f4f4f9;
      }
      h1 {
        color: #333;
      }
      .consistency-section {
        background: #fff;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .note-input {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }
      .item-card {
        border: 1px solid #ddd;
        padding: 10px;
        margin-top: 5px;
        background-color: #e9ecef;
        border-radius: 4px;
      }
      .strong-write button {
        background-color: #28a745;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
      }
      .weak-write button,
      .eventual-write button {
        background-color: #ffc107;
        color: #333;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
      }
      .read-button {
        background-color: #007bff;
        color: white;
        margin-left: 10px;
      }
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <h1>Distributed Inventory Tracker</h1>
    <p>Simulasi perbedaan konsistensi data untuk 2 pengguna.</p>

    <div id="roleSelector" style="margin-bottom: 20px">
      <strong>Pilih Peran Anda:</strong>
      <button onclick="setRole('strong', 'Laptop 1 (Gudang Utama)')">
        Peran STRONG
      </button>
      <button onclick="setRole('weak_eventual', 'Laptop 2 (Cabang Toko)')">
        Peran WEAK + EVENTUAL
      </button>
    </div>

    <div id="appContent" class="hidden">
      <input
        id="username"
        placeholder="Nama Anda / Laptop"
        value="Laptop"
        style="
          margin-bottom: 20px;
          padding: 8px;
          border-radius: 4px;
          border: 1px solid #ccc;
        "
      />

      <div class="consistency-section strong-write" id="strongSection">
        <h2>Strong Consistency (Gudang Utama)</h2>
        <p>Write & Read selalu ke Primary DB. Data instan dan terjamin.</p>
        <div class="note-input">
          <input id="strongName" placeholder="Nama Item" value="Kopi" />
          <input
            id="strongQty"
            type="number"
            placeholder="Kuantitas"
            value="100"
            style="width: 100px"
          />
          <button onclick="writeInventory('strong')">Write</button>
          <button class="read-button" onclick="readInventory('strong')">
            Read / Refresh
          </button>
        </div>
        <h3>Stok Saat Ini:</h3>
        <div id="strongOutput"></div>
      </div>

      <div class="consistency-section weak-write" id="weakSection">
        <h2>Weak Consistency (Toko Cabang - Read)</h2>
        <p>
          Write ke Primary, Read dari Replica yang jarang update (Simulasi data
          lama/kosong).
        </p>
        <div class="note-input">
          <input id="weakName" placeholder="Nama Item" value="Teh" />
          <input
            id="weakQty"
            type="number"
            placeholder="Kuantitas"
            value="50"
            style="width: 100px"
          />
          <button onclick="writeInventory('weak')">Write</button>
          <button class="read-button" onclick="readInventory('weak')">
            Read / Refresh
          </button>
        </div>
        <h3>Stok Cabang:</h3>
        <div id="weakOutput"></div>
      </div>

      <div class="consistency-section eventual-write" id="eventualSection">
        <h2>Eventual Consistency (Pembaruan Tertunda 5 Detik)</h2>
        <p>Write ke Primary, Propagasi ke Replica tertunda 5 detik.</p>
        <div class="note-input">
          <input id="eventualName" placeholder="Nama Item" value="Gula" />
          <input
            id="eventualQty"
            type="number"
            placeholder="Kuantitas"
            value="200"
            style="width: 100px"
          />
          <button onclick="writeInventory('eventual')">Write</button>
          <button class="read-button" onclick="readInventory('eventual')">
            Read / Refresh
          </button>
        </div>
        <div id="eventualMessage" style="margin-top: 5px; color: #dc3545"></div>
        <h3>Stok Cabang (Eventual):</h3>
        <div id="eventualOutput"></div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
